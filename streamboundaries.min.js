(function(e,t,n){function m(t,n){var r=e(t.target),i=r.offset();return{x:t.pageX-i.left+n.left,y:t.pageY-i.top+n.top}}function g(e){var t=e.attr(h);return t?d[t]:e}var r="thumb",i="width",s="height",o="apply",u="call",a="offset",f="bounds",l="css",c="orientation",h="data-streamboundariesid",p="getBoundingClientRect",d={},v={init:function(v){function w(){var e=g.s[r],t=g[s](),n=e[s](),o=g[i](),u=e[i]();if(n>t&&g.s[c]==="x"){e[l]({top:-(n-t)/2})}if(u>o&&g.s[c]==="y"){e[l]({left:-(u-o)/2})}if(g.s[f]===!1||g["auto"+f]){g["auto"+f]=!0;g.s[f]={bottom:g[s]()-e[s](),left:0,top:0,right:g[i]()-e[i]()}}}var g=this;if(!g.length){return g}if(g.length>1){g.each(function(){e.fn.streamBoundaries[o](e(this),arguments)});return g}var y={},b=function(){};g.s=e.extend({autoRotate:!0,bg:"#DEDEDE",bounds:!1,height:"5px",onFinish:b,onUpdate:b,orientation:"x",thumb:g.find("*:first"),thumbBg:"#333",thumbHeight:"5px",thumbIsLarger:!1,thumbWidth:"10%",width:"300px"},v);g[a+"X"]=0;g[a+"Y"]=0;g["auto"+f]=!1;g.c=++n;y[h]=g.c;g.attr(y);g.render=function(){var e=g.s,t=e[r],n=e[c]==="x",o=n&&e.autoRotate;g[l]({width:e[o?i:s],height:e[o?s:i],background:e.bg,position:"relative"});t[l]({width:e[r+(o?"Width":"Height")],height:e[r+(o?"Height":"Width")],background:e[r+"Bg"],position:"absolute",cursor:"pointer"});w()};g.render();g.wmm=function(e){e.preventDefault();var t=e.clientX-g[a+"X"],n=e.clientY-g[a+"Y"],i=0,s=0,o=g.s,h=o[c];if(o.thumbIsLarger){i=t;s=n;if(h==="x"||h==="2d"){o[r][l]({left:i})}if(h==="y"||h==="2d"){o[r][l]({top:s})}}else{var p=o[f].bottom,d=o[f].left,v=o[f].top,m=o[f].right;if(h==="x"||h==="2d"){if(t<=d){i=d}else if(t>=m){i=m}else{i=t}o[r][l]({left:i})}if(h==="y"||h==="2d"){if(n<=v){s=v}else if(n>=p){s=p}else{s=n}o[r][l]({top:s})}}o.onUpdate[u](g,{bounds:g.s[f],originalEvent:e,px:i/(m-d),py:s/(p-v),x:i,y:s})};g.mousedown(function(n){n.preventDefault();w();g.rect=g[0][p]();var o=e(t),h=m(n,g.rect);g[a+"X"]=h.x;g[a+"Y"]=h.y;o.mousemove(g.wmm);o.one("mouseup",function(){o.unbind("mousemove",g.wmm);if(g.s.thumbIsLarger){var e=g[0][p](),t=g.s[r][0][p](),a=g.s,h=a[c],d=!1,v=!1;if(h==="x"||h==="2d"){if(t.left>=e.left){d=0}else if(t.right<=e.right){d=a[i]-a[r][i]()}if(d!==!1){a[r][l]({left:d})}}if(h==="y"||h==="2d"){if(t.top>=e.top){v=0}else if(t.bottom<=e.bottom){v=a[s]-a[r][s]()}if(v!==!1){a[r][l]({top:v})}}}g.s.onUpdate[u](g,{bounds:g.s[f],originalEvent:n})})});d[g.c]=g;return g},updateOpts:function(t){var n=this;if(t.bounds){n["auto"+f]=!1}n.s=e.extend(e.extend({},n.s),t);n.render()}};e.fn.streamBoundaries=function(t){var n=g(this);if(v[t]){return v[t][o](n,Array.prototype.slice[u](arguments,1))}else if(Object.prototype.toString[u](t)==="[object Object]"||!t){return v["init"][o](n,arguments)}else{e.error(["The method ",t," does not exist"].join(""))}}})(jQuery,this,0)