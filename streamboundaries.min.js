(function(e,t,n){function g(t,n){var r=e(t.target),i=r.offset();return{x:t.pageX-i.left+n.left,y:t.pageY-i.top+n.top}}function y(e){var t=e.attr(h);return t?v[t]:e}var r="thumb",i="width",s="height",o="apply",u="call",a="offset",f="bounds",l="css",c="orientation",h="data-streamboundariesid",p="getBoundingClientRect",d="isViewport",v={},m={init:function(m){function E(){var e=y.s[r],t=y[s](),n=e[s](),o=y[i](),u=e[i]();if(n>t&&y.s[c]==="x"){e[l]({top:-(n-t)/2})}if(u>o&&y.s[c]==="y"){e[l]({left:-(u-o)/2})}if(y.s[f]===!1||y["auto"+f]){y["auto"+f]=!0;y.s[f]={bottom:y[s]()-e[s](),left:0,top:0,right:y[i]()-e[i]()}}}var y=this;if(!y.length){return y}if(y.length>1){y.each(function(){e.fn.streamBoundaries[o](e(this),arguments)});return y}var b={},w=function(){};y.s=e.extend({aspectRatio:false,autoRotate:!0,bg:"#DEDEDE",centerThumb:!0,crosshair:!0,bounds:!1,height:"5px",isViewport:!1,minResizeHeight:"20px",minResizeWidth:"20px",onFinish:w,onUpdate:w,orientation:"x",thumb:y.find("*:first"),thumbBg:"#333",thumbHeight:"5px",thumbWidth:"10%",resizable:!1,width:"300px"},m);y[a+"X"]=0;y[a+"Y"]=0;y["auto"+f]=!1;y.c=++n;y.isresize;b[h]=y.c;y.attr(b);y.render=function(t,n){var o=y.s,u=o[r],a=o[c]==="y"&&o.autoRotate,h={width:o[a?s:i],height:o[a?i:s],background:o.bg,position:"relative"},v={width:o[r+(a?"Height":"Width")],height:o[r+(a?"Width":"Height")],background:o[r+"Bg"],position:"relative","box-sizing":"border-box",cursor:"pointer"};if(o.resizable&&!e("#sb_thumbres",y).length){u.append('<div id="sb_thumbres" style="width:30%;height:30%;background:#000;cursor:se-resize;'+"border-left:solid 2px #B3B37A;border-top:solid 2px #B3B37A;max-width:30px;"+'max-height:30px;right:0;bottom:0;position:absolute;"></div>')}if(o.crosshair&&!e("#sb_cross",y).length){u.append('<div id="sb_cross" style="font-size: 20px;position: absolute;top: 50%;left: 50%;width: 20px;'+'height: 20px;overflow: hidden;margin: -10px 0 0 -10px;text-align: center; line-height: 20px;">+</div>')}if(t||t===0){v["left"]=t}if(n||n===0){v["top"]=n}if(y.s[d]){h["overflow"]="hidden"}y[l](h);u[l](v);E();var m=u[0][p](),g=y[0][p](),b=m.left-g.left,w=m.top-g.top;y.positionData={bounds:y.s[f],jqueryEvent:null,originalEvent:null,px:b/(o[f].right-o[f].left),py:w/(o[f].bottom-o[f].top),type:null,x:b,x2:w+m.width,y:w,y2:b+m.height}};y.render();y.posLT=function(){var e=y.s,t=e.centerThumb,n=e[r],o=y[0][p](),u=n[0][p](),a=e[c],f=!1,h=!1,d=(e[i]-n[i]())/2,v=(e[s]-n[s]())/2;if(a==="x"||a==="2d"){if(u.left>=o.left){f=0}else if(u.right<=o.right){f=e[i]-n[i]()}if(f!==!1){n[l]({left:t&&d>0?d:f})}}if(a==="y"||a==="2d"){if(u.top>=o.top){h=0}else if(u.bottom<=o.bottom){h=e[s]-n[s]()}if(h!==!1){n[l]({top:t&&v>0?v:h})}}};y.wmm=function(e){e.preventDefault();var t=e.clientX-y[a+"X"],n=e.clientY-y[a+"Y"],i=0,s=0,o=y.s,h=o[c],v=h==="2d",m=h==="y",g=h==="x",b=o[r],w=o[f].bottom,E=o[f].left,S=o[f].top,x=o[f].right,N="normal";if(o[d]){N="viewport";i=t;s=n;if(g||v){b[l]({left:i})}if(m||v){b[l]({top:s})}}else if(y.isresize){N="resize";var C=y.thumbRect,k=y.rect,L=o.aspectRatio||C.width/C.height;i=C.right-k.left;s=C.bottom-k.top;if(g||v){var A=i+t-(C.left-k.left);if(A+C.left>=k.right){A=k.width-(C.left-k.left)}else if(A<=parseFloat(o.minResizeWidth)){A=o.minResizeWidth}if(e.shiftKey&&v){if(A/L+(C.top-k.top)>k.height){A=(k.height-(C.top-k.top))*L}}b[l]({width:A})}if(m||v){var O=s+n-(C.top-k.top);if(e.shiftKey&&v){O=A/L}if(O+C.top>=k.bottom){O=k.height-(C.top-k.top)}else if(O<=parseFloat(o.minResizeHeight)){O=o.minResizeHeight}b[l]({height:O})}}else{if(g||v){if(t<=E){i=E}else if(t>=x){i=x}else{i=t}b[l]({left:i})}if(m||v){if(n<=S){s=S}else if(n>=w){s=w}else{s=n}b[l]({top:s})}}var M=b[0][p](),_=y.isresize,D=_?y.thumbRect.left-y.rect.left:i,P=_?y.thumbRect.top-y.rect.top:s;y.positionData={bounds:y.s[f],jqueryEvent:e,originalEvent:e.originalEvent,px:D/(x-E),py:P/(w-S),lastMove:N,thumbRatio:M.width/M.height,x:D,x2:D+M.width,y:P,y2:P+M.height};o.onUpdate[u](y,y.positionData)};y.mousedown(function(n){n.preventDefault();y.rect=y[0][p]();y.thumbRect=y.s[r][0][p]();y.isresize=n.target.id==="sb_thumbres";E();y.startDim={width:y.thumbRect.width,height:y.thumbRect.height};var i=e(t);if(y.isresize){y[a+"X"]=n.clientX;y[a+"Y"]=n.clientY}else{var s=g(n,y.rect);y[a+"X"]=s.x;y[a+"Y"]=s.y}i.mousemove(y.wmm);i.one("mouseup",function(e){i.unbind("mousemove",y.wmm);if(y.s[d]){y.posLT()}y.isresize=!1;y.s.onFinish[u](y,{bounds:y.s[f],jQueryEvent:e,originalEvent:e.originalEvent})})});v[y.c]=y;return y},updateOpts:function(t){var n=this;if(t.bounds){n["auto"+f]=!1}n.s=e.extend(e.extend({},n.s),t);n.render();return n},reposition:function(e){var t=this;if(!e){e={}}t.render(e.x,e.y);if(t.s[d]){t.posLT()}return t},getPositionData:function(){return this.positionData}};e.fn.streamBoundaries=function(t){var n=y(this);if(m[t]){return m[t][o](n,Array.prototype.slice[u](arguments,1))}else if(Object.prototype.toString[u](t)==="[object Object]"||!t){return m["init"][o](n,arguments)}else{e.error(["The method ",t," does not exist"].join(""))}}})(jQuery,this,0)