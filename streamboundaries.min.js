(function(e,t,n){function f(t,n){var r=e(t.target),i=r.offset();return{x:t.pageX-i.left+n.left,y:t.pageY-i.top+n.top}}function l(e){var t=e.attr(o);return t?u[t]:e}var r="thumb",i="width",s="height",o="data-streamboundariesid",u={},a={init:function(a){function p(e,t){var n=l.s.thumb,r=e.height,i=t.height,s=e.width,o=t.width;if(i>r&&l.s.orientation==="x"){n.css({top:-(i-r)/2})}if(o>s&&l.s.orientation==="y"){n.css({left:-(o-s)/2})}if(l.s.bounds===!1||l.autobounds){l.autobounds=!0;l.s.bounds={bottom:r-i,left:0,top:0,right:s-o}}}var l=this;if(!l.length){return l}if(l.length>1){l.each(function(){e.fn.streamBoundaries(a)});return l}var c={},h=function(){};l.s=e.extend({aspectRatio:false,autoRotate:!0,bg:"#DEDEDE",centerThumb:!0,crosshair:!0,bounds:!1,height:"5px",isViewport:!1,minResizeHeight:"20px",minResizeWidth:"20px",onFinish:h,onUpdate:h,orientation:"x",thumb:l.find("*:first"),thumbBg:"#333",thumbHeight:"5px",thumbWidth:"10%",resizable:!1,width:"300px"},a);l.offsetX=0;l.offsetY=0;l.autobounds=!1;l.c=++n;l.isresize;c[o]=l.c;l.attr(c);l.render=function(t,n){var o=l.s,u=o.thumb,a=u[0].getBoundingClientRect(),f=l[0].getBoundingClientRect(),c=o.orientation==="y"&&o.autoRotate,h={width:o[c?s:i],height:o[c?i:s],background:o.bg,position:"relative"},d={width:o[r+(c?"Height":"Width")],height:o[r+(c?"Width":"Height")],background:o.thumb+"Bg",position:"relative","box-sizing":"border-box",cursor:"pointer"};if(o.resizable&&!e("#sb_thumbres",l).length){u.append('<div id="sb_thumbres" style="width:30%;height:30%;background:#000;cursor:se-resize;'+"border-left:solid 2px #B3B37A;border-top:solid 2px #B3B37A;max-width:30px;"+'max-height:30px;right:0;bottom:0;position:absolute;"></div>')}if(o.crosshair&&!e("#sb_cross",l).length){u.append('<div id="sb_cross" style="font-size: 20px;position: absolute;top: 50%;left: 50%;width: 20px;'+"height: 20px;overflow: hidden;margin: -10px 0 0 -10px;text-align: center; line-height: 20px;"+'border-radius: 20px;background: #FFF;">+</div>')}if(t||t===0){d["left"]=t}if(n||n===0){d["top"]=n}if(l.s.isViewport){h["overflow"]="hidden"}l.css(h);u.css(d);p(f,a);var v=a.left-f.left,m=a.top-f.top;l.positionData={bounds:l.s.bounds,jqueryEvent:null,originalEvent:null,px:v/(o.bounds.right-o.bounds.left),py:m/(o.bounds.bottom-o.bounds.top),thumbRation:a.width/a.height,trackHeight:f.height,trackWidth:f.width,type:null,x:v,x2:m+a.width,y:m,y2:v+a.height}};l.render();l.posLT=function(){var e=l.s,t=e.centerThumb,n=e.thumb,r=l[0].getBoundingClientRect(),i=n[0].getBoundingClientRect(),s=e.orientation,o=!1,u=!1,a=(e.width-i.width)/2,f=(e.height-i.height)/2;if(s==="x"||s==="2d"){if(i.left>=r.left){o=0}else if(i.right<=r.right){o=e.width-i.width}if(o!==!1){n.css({left:t&&a>0?a:o})}}if(s==="y"||s==="2d"){if(i.top>=r.top){u=0}else if(i.bottom<=r.bottom){u=e.height-i.height}if(u!==!1){n.css({top:t&&f>0?f:u})}}};l.wmm=function(e){e.preventDefault();var t=e.clientX-l.offsetX,n=e.clientY-l.offsetY,r=0,i=0,s=l.s,o=s.orientation,u=o==="2d",a=o==="y",f=o==="x",c=s.thumb,h=s.bounds,p=h.bottom,d=h.left,v=h.top,m=h.right,g="normal";if(s.isViewport){g="viewport";r=t;i=n;if(f||u){c.css({left:r})}if(a||u){c.css({top:i})}}else if(l.isresize){g="resize";var y=l.thumbRect,b=l.rect,w=s.aspectRatio||y.width/y.height;r=y.right-b.left;i=y.bottom-b.top;if(f||u){var E=r+t-(y.left-b.left);if(E+y.left>=b.right){E=b.width-(y.left-b.left)}else if(E<=parseFloat(s.minResizeWidth)){E=s.minResizeWidth}if(e.shiftKey&&u){if(E/w+(y.top-b.top)>b.height){E=(b.height-(y.top-b.top))*w}}c.css({width:E})}if(a||u){var S=i+n-(y.top-b.top);if(e.shiftKey&&u){S=E/w}if(S+y.top>=b.bottom){S=b.height-(y.top-b.top)}else if(S<=parseFloat(s.minResizeHeight)){S=s.minResizeHeight}c.css({height:S})}}else{if(f||u){if(t<=d){r=d}else if(t>=m){r=m}else{r=t}c.css({left:r})}if(a||u){if(n<=v){i=v}else if(n>=p){i=p}else{i=n}c.css({top:i})}}var x=c[0].getBoundingClientRect(),N=l.isresize,b=l.rect,C=N?l.thumbRect.left-b.left:r,k=N?l.thumbRect.top-b.top:i;l.positionData={bounds:l.s.bounds,jqueryEvent:e,originalEvent:e.originalEvent,px:C/(m-d),py:k/(p-v),lastMove:g,thumbRatio:x.width/x.height,trackHeight:b.height,trackWidth:b.width,x:C,x2:C+x.width,y:k,y2:k+x.height};s.onUpdate.call(l,l.positionData)};l.mousedown(function(n){n.preventDefault();l.rect=l[0].getBoundingClientRect();l.thumbRect=l.s.thumb[0].getBoundingClientRect();l.isresize=n.target.id==="sb_thumbres";p(l.rect,l.thumbRect);l.startDim={width:l.thumbRect.width,height:l.thumbRect.height};var r=e(t);if(l.isresize){l.offsetX=n.clientX;l.offsetY=n.clientY}else{var i=f(n,l.rect);l.offsetX=i.x;l.offsetY=i.y}r.mousemove(l.wmm);r.one("mouseup",function(e){r.unbind("mousemove",l.wmm);if(l.s.isViewport){l.posLT()}l.isresize=!1;l.s.onFinish.call(l,{bounds:l.s.bounds,jQueryEvent:e,originalEvent:e.originalEvent})})});u[l.c]=l;return l},updateOpts:function(t){var n=this;if(t.bounds){n.autobounds=!1}n.s=e.extend(e.extend({},n.s),t);n.render();return n},reposition:function(e){var t=this;if(!e){e={}}t.render(e.x,e.y);if(t.s.isViewport){t.posLT()}return t},getPositionData:function(){return this.positionData}};e.fn.streamBoundaries=function(t){var n=l(this);if(a[t]){return a[t].apply(n,Array.prototype.slice.call(arguments,1))}else if(Object.prototype.toString.call(t)==="[object Object]"||!t){return a.init.apply(n,arguments)}else{e.error(["The method ",t," does not exist"].join(""))}}})(jQuery,this,0)