(function(e,t,n){function f(t,n){var r=t.target.id==="sb_cross"?e(t.target).parent():e(t.target),i=r.offset();return{x:t.pageX-Math.round(i.left)+n.left,y:t.pageY-Math.round(i.top)+n.top}}function l(e){var t=e.attr(o);return t?u[t]:e}var r="thumb",i="width",s="height",o="data-streamboundariesid",u={},a={init:function(a){function p(e,t){var n=l.s.thumb,r=Math.round(e.height),i=Math.round(t.height),s=Math.round(e.width),o=Math.round(t.width);if(i>r&&l.s.orientation==="x"){n.css({top:-(i-r)/2})}if(o>s&&l.s.orientation==="y"){n.css({left:-(o-s)/2})}if(l.s.bounds===!1||l.autobounds){l.autobounds=!0;l.s.bounds={bottom:r-i,left:0,top:0,right:s-o}}}var l=this;if(!l.length||l.data("data-streamboundariesid")){return l}if(l.length>1){l.each(function(){e.fn.streamBoundaries(a)});return l}var c={},h=function(){};l.s=e.extend({aspectRatio:!1,autoRotate:!0,bg:"#DEDEDE",centerThumb:!0,crosshair:!0,bounds:!1,height:"5px",isViewport:!1,lockAspectRatio:!1,minResizeHeight:"20px",minResizeWidth:"20px",onBeforeUpdate:h,onFinish:h,onUpdate:h,orientation:"x",resizable:!1,round:!0,scale9Grid:!1,scaleX:!0,scaleY:!0,thumb:l.find("*:first"),thumbBg:"#333",thumbHeight:"5px",thumbWidth:"10%",width:"300px",x:!1,y:!1},a);l.offsetX=0;l.offsetY=0;l.autobounds=!1;l.c=++n;l.isresize;c[o]=l.c;l.attr(c);l.render=function(t,n){var o=l.s,u=o.thumb,a=o.orientation==="y"&&o.autoRotate,f={width:o[a?s:i],height:o[a?i:s],background:o.bg,position:"relative"},c={width:o[r+(a?"Height":"Width")],height:o[r+(a?"Width":"Height")],background:o.thumb+"Bg",position:"relative","box-sizing":"border-box",cursor:"pointer",border:"solid thin #005400"};if(o.resizable&&!e(".sb_thumbres",l).length){var h="<style>.sb_thumbres {max-width:30px;max-height:30px;position:absolute;width:20%;"+"height:20%;}.sb_scale9 {position:absolute;background:#005400;}"+".sb_scale9H{height:100%;width:1px;} .sb_scale9V {width: 100%;height:1px;}</style>"+('<div id="sbtT" class="sb_thumbres" style="cursor:nw-resize;'+'border-left:solid 2px #000;border-top:solid 2px #000;left:-1px;top:-1px;"></div>')+('<div id="sbtTM" class="sb_thumbres" style="cursor:n-resize;'+'border-top:solid 2px #000;left:50%;top:-1px;margin-left: -15px;"></div>')+('<div id="sbtR" class="sb_thumbres" style="cursor:ne-resize;'+'border-right:solid 2px #000;border-top:solid 2px #000;right:-1px;top:-1px;"></div>')+('<div id="sbtRM" class="sb_thumbres" style="cursor:e-resize;'+'border-right:solid 2px #000;right:-1px;top:50%;margin-top: -15px;"></div>')+('<div id="sbtB" class="sb_thumbres" style="width:20%;height:20%;cursor:se-resize;'+"border-right:solid 2px #000;border-bottom:solid 2px #000;max-width:30px;"+'max-height:30px;right:-1px;bottom:-1px;"></div>')+('<div id="sbtBM" class="sb_thumbres" style="cursor:s-resize;'+'border-bottom:solid 2px #000;left:50%;bottom:-1px;margin-left: -15px;"></div>')+('<div id="sbtL" class="sb_thumbres" style="cursor:sw-resize;'+'border-left:solid 2px #000;border-bottom:solid 2px #000;left:-1px;bottom:-1px;"></div>')+('<div id="sbtLM" class="sb_thumbres" style="cursor:w-resize;'+'border-left:solid 2px #000;left:-1px;top:50%;margin-top: -15px;"></div>');if(l.s.scale9Grid){h+='<div class="sb_scale9 sb_scale9H" style="left:33%;"></div>'+'<div class="sb_scale9 sb_scale9H" style="left:66%;"></div>'+'<div class="sb_scale9 sb_scale9V" style="top:33%;"></div>'+'<div class="sb_scale9 sb_scale9V" style="top:66%;"></div>'}u.append(h)}if(o.crosshair&&!e("#sb_cross",l).length){u.append('<div id="sb_cross" style="font-size: 20px;position: absolute;top: 50%;left: 50%;width: 20px;'+"height: 20px;overflow: hidden;margin: -10px 0 0 -10px;text-align: center; line-height: 20px;"+'border-radius: 20px;background: #FFF;opacity: 0.5;">+</div>')}if(t||t===0||o.x||o.x===0){c["left"]=t||t===0?t:o.x}if(n||n===0||o.y||o.y===0){c["top"]=n||n===0?n:o.y}if(l.s.isViewport){f["overflow"]="hidden"}l.css(f);u.css(c);var d=u[0].getBoundingClientRect(),v=l[0].getBoundingClientRect();p(v,d);var m=d.left-v.left,g=d.top-v.top;l.positionData={bounds:o.bounds,jqueryEvent:null,originalEvent:null,px:m/(o.bounds.right-o.bounds.left),py:g/(o.bounds.bottom-o.bounds.top),thumbRatio:d.width/d.height,trackHeight:v.height,trackWidth:v.width,type:null,x:m,x2:m+d.width,y:g,y2:g+d.height}};l.render();l.posLT=function(){var e=l.s,t=e.centerThumb,n=e.thumb,r=l[0].getBoundingClientRect(),i=n[0].getBoundingClientRect(),s=e.orientation,o=!1,u=!1,a=(e.width-i.width)/2,f=(e.height-i.height)/2;if(s==="x"||s==="2d"){if(i.left>=r.left){o=0}else if(i.right<=r.right){o=e.width-i.width}if(o!==!1){n.css({left:t&&a>0?a:o})}}if(s==="y"||s==="2d"){if(i.top>=r.top){u=0}else if(i.bottom<=r.bottom){u=e.height-i.height}if(u!==!1){n.css({top:t&&f>0?f:u})}}};l.wmm=function(e){e.preventDefault();var t=l.s.onUpdate.call(l,l.positionData);if(t===false){return}var n=e.clientX-l.offsetX,r=e.clientY-l.offsetY,i=0,s=0,o=l.s,u=o.orientation,a=u==="2d",f=u==="y",c=u==="x",h=o.thumb,p=o.bounds,d=p.bottom,v=p.left,m=p.top,g=p.right,y="normal",b=o.round;if(o.isViewport){y="viewport";i=n;s=r;if(c||a){h.css({left:i})}if(f||a){h.css({top:s})}}else if(l.isresize){y="resize";var w=l.thumbRect,E=l.rect,S=o.aspectRatio||w.width/w.height,x=l.curTarget.id,N=x==="sbtLM"||x==="sbtL"||x==="sbtT",C=l.curTarget.id==="sbtTM"||l.curTarget.id==="sbtT"||l.curTarget.id==="sbtR";i=w.right-E.left;s=w.bottom-E.top;if(x==="sbtRM"||x==="sbtLM"){c=!0;f=a=!1}if(x==="sbtTM"||x==="sbtBM"){f=!0;c=a=!1}if((c||a)&&o.scaleX){var k=i+n-(w.left-E.left),L={};if(N){var A=w.left-E.left,O=A+(k-w.width);i=L.left=O;L.right=w.right;k=w.width-(k-w.width);if(O<=o.bounds.left){i=L.left=o.bounds.left;k=A+w.width}else if(k<=parseFloat(o.minResizeWidth)){i=L.left=w.right-o.minResizeWidth;k=o.minResizeWidth}}else{if(k+w.left>=E.right){k=E.width-(w.left-E.left)}else if(k<=parseFloat(o.minResizeWidth)){k=o.minResizeWidth}}if(e.shiftKey&&a||o.lockAspectRatio){if(k/S+(w.top-E.top)>E.height){k=(E.height-(w.top-E.top))*S}}L.width=b?Math.round(k):k;h.css(L)}if((f||a)&&o.scaleY){var M=s+r-(w.top-E.top),_={};if(e.shiftKey&&a||o.lockAspectRatio){M=k/S}if(C){var D=w.top-E.top,P=D+(M-w.height);s=_.top=P;_.bottom=w.bottom;M=w.height-(M-w.height);if(P<=o.bounds.top){s=_.top=o.bounds.top;M=D+w.height}else if(M<=parseFloat(o.minResizeHeight)){s=_.top=w.bottom-o.minResizeHeight;M=o.minResizeHeight}}else{if(M+w.top>=E.bottom){M=E.height-(w.top-E.top)}else if(M<=parseFloat(o.minResizeHeight)){M=o.minResizeHeight}}_.height=b?Math.round(M):M;h.css(_)}}else{if(c||a){if(n<=v){i=v}else if(n>=g){i=g}else{i=n}n=b?Math.round(i):i;h.css({left:i})}if(f||a){if(r<=m){s=m}else if(r>=d){s=d}else{s=r}n=b?Math.round(s):s;h.css({top:s})}}var H=h[0].getBoundingClientRect(),B=l.isresize,E=l.rect,j=B?H.left-E.left:i,F=B?H.top-E.top:s,I=H.width,q=H.height,R=E.width,U=E.height;if(b){j=Math.round(j);F=Math.round(F);I=Math.round(I);q=Math.round(q);R=Math.round(R);U=Math.round(U)}l.positionData={bounds:l.s.bounds,jqueryEvent:e,originalEvent:e.originalEvent,px:j/(g-v),py:F/(d-m),lastMove:y,thumbRatio:I/q,thumbHeight:q,thumbWidth:I,trackHeight:U,trackWidth:R,x:j,x2:j+I,y:F,y2:F+q}};l.find("div").mousedown(function(n){if(n.which===3){return}if(l.s.onBeforeUpdate.call(l,l.positionData)===false){return}n.preventDefault();l.rect=l[0].getBoundingClientRect();l.thumbRect=l.s.thumb[0].getBoundingClientRect();l.isresize=e(n.target).hasClass("sb_thumbres");p(l.rect,l.thumbRect);l.startDim={width:l.thumbRect.width,height:l.thumbRect.height};var r=e(t);if(l.isresize){l.curTarget=n.target;l.offsetX=n.clientX;l.offsetY=n.clientY}else{var i=f(n,l.rect);l.offsetX=i.x;l.offsetY=i.y}r.mousemove(l.wmm);r.one("mouseup",function(){r.unbind("mousemove",l.wmm);if(l.s.isViewport){l.posLT()}l.isresize=!1;l.s.onFinish.call(l,l.positionData)})});u[l.c]=l;return l},updateOpts:function(t){var n=this;if(t.bounds){n.autobounds=!1}n.s=e.extend(e.extend({},n.s),t);n.render();return n},reposition:function(e){var t=this;if(!e){e={}}t.render(e.x,e.y);if(t.s.isViewport){t.posLT()}return t},getPositionData:function(){return this.positionData}};e.fn.streamBoundaries=function(t){var n=l(this);if(a[t]){return a[t].apply(n,Array.prototype.slice.call(arguments,1))}else if(Object.prototype.toString.call(t)==="[object Object]"||!t){return a.init.apply(n,arguments)}else{e.error(["The method ",t," does not exist"].join(""))}}})(jQuery,this,0)