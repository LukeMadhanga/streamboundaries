(function(e,t,n){function g(t,n){var r=e(t.target),i=r.offset();return{x:t.pageX-i.left+n.left,y:t.pageY-i.top+n.top}}function y(e){var t=e.attr(h);return t?v[t]:e}var r="thumb",i="width",s="height",o="apply",u="call",a="offset",f="bounds",l="css",c="orientation",h="data-streamboundariesid",p="getBoundingClientRect",d="isViewport",v={},m={init:function(m){function E(){var e=y.s[r],t=y[s](),n=e[s](),o=y[i](),u=e[i]();if(n>t&&y.s[c]==="x"){e[l]({top:-(n-t)/2})}if(u>o&&y.s[c]==="y"){e[l]({left:-(u-o)/2})}if(y.s[f]===!1||y["auto"+f]){y["auto"+f]=!0;y.s[f]={bottom:y[s]()-e[s](),left:0,top:0,right:y[i]()-e[i]()}}}var y=this;if(!y.length){return y}if(y.length>1){y.each(function(){e.fn.streamBoundaries[o](e(this),arguments)});return y}var b={},w=function(){};y.s=e.extend({autoRotate:!0,bg:"#DEDEDE",centerThumb:!0,bounds:!1,height:"5px",isViewport:!1,onFinish:w,onUpdate:w,orientation:"x",thumb:y.find("*:first"),thumbBg:"#333",thumbHeight:"5px",thumbWidth:"10%",width:"300px"},m);y[a+"X"]=0;y[a+"Y"]=0;y["auto"+f]=!1;y.c=++n;b[h]=y.c;y.attr(b);y.render=function(e,t){var n=y.s,o=n[r],u=n[c]==="y"&&n.autoRotate,a={width:n[u?s:i],height:n[u?i:s],background:n.bg,position:"relative"},f={width:n[r+(u?"Height":"Width")],height:n[r+(u?"Width":"Height")],background:n[r+"Bg"],position:"absolute",cursor:"pointer"};if(e||e===0){f["left"]=e}if(t||t===0){f["top"]=t}if(y.s[d]){a["overflow"]="hidden"}y[l](a);o[l](f);E()};y.render();y.posLT=function(){var e=y.s,t=e.centerThumb,n=e[r],o=y[0][p](),u=n[0][p](),a=e[c],f=!1,h=!1,d=(e[i]-n[i]())/2,v=(e[s]-n[s]())/2;if(a==="x"||a==="2d"){if(u.left>=o.left){f=0}else if(u.right<=o.right){f=e[i]-n[i]()}if(f!==!1){n[l]({left:t&&d>0?d:f})}}if(a==="y"||a==="2d"){if(u.top>=o.top){h=0}else if(u.bottom<=o.bottom){h=e[s]-n[s]()}if(h!==!1){n[l]({top:t&&v>0?v:h})}}};y.wmm=function(e){e.preventDefault();var t=e.clientX-y[a+"X"],n=e.clientY-y[a+"Y"],i=0,s=0,o=y.s,h=o[c];if(o[d]){i=t;s=n;if(h==="x"||h==="2d"){o[r][l]({left:i})}if(h==="y"||h==="2d"){o[r][l]({top:s})}}else{var p=o[f].bottom,v=o[f].left,m=o[f].top,g=o[f].right;if(h==="x"||h==="2d"){if(t<=v){i=v}else if(t>=g){i=g}else{i=t}o[r][l]({left:i})}if(h==="y"||h==="2d"){if(n<=m){s=m}else if(n>=p){s=p}else{s=n}o[r][l]({top:s})}}o.onUpdate[u](y,{bounds:y.s[f],originalEvent:e,px:i/(g-v),py:s/(p-m),x:i,y:s})};y.mousedown(function(n){n.preventDefault();E();y.rect=y[0][p]();var r=e(t),i=g(n,y.rect);y[a+"X"]=i.x;y[a+"Y"]=i.y;r.mousemove(y.wmm);r.one("mouseup",function(e){r.unbind("mousemove",y.wmm);if(y.s[d]){y.posLT()}y.s.onFinish[u](y,{bounds:y.s[f],originalEvent:e})})});v[y.c]=y;return y},updateOpts:function(t){var n=this;if(t.bounds){n["auto"+f]=!1}n.s=e.extend(e.extend({},n.s),t);n.render();return n},reposition:function(e){var t=this;if(!e){e={}}t.render(e.x,e.y);if(t.s[d]){t.posLT()}return t}};e.fn.streamBoundaries=function(t){var n=y(this);if(m[t]){return m[t][o](n,Array.prototype.slice[u](arguments,1))}else if(Object.prototype.toString[u](t)==="[object Object]"||!t){return m["init"][o](n,arguments)}else{e.error(["The method ",t," does not exist"].join(""))}}})(jQuery,this,0)